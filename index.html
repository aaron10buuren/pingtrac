<meta content="width = device-width, initial-scale = 1, user-scalable = no" name="viewport"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>

<style>
  body {
  	overflow: hidden;
    	padding: 0;
	margin: 0;
	font-family: sans-serif;
	-webkit-user-select: none;
	touch-action: manipulation;
  }

  .score1, .score2 {
    	position: absolute;
	top: 0;
	bottom: 0;
	width: 50%;
	z-index: 1;
	display: flex;
	align-items: center;
  }
  
  .score1 {
    	left: 0;
  }
  
  .score2 {
    	right: 0;
  }
  
  .number {
    	width: 100%;
	display: block;
    	text-align: center;
    	font-weight: bold;
    	font-size: 70vh;
  }
  
  .score1 .number {
  	-webkit-transform: rotate(90deg);
  }
  
  .score2 .number {
  	-webkit-transform: rotate(-90deg);
  }
  
  .next_server, .win {
	position: absolute;
	top: 0;
	bottom: 0;
	width: 100%;
	text-align: center;
	z-index: 2;
	background: red;
	color: white;
        display: none;
  }

  @-webkit-keyframes win {
    0% { background: red; }
    25% { background: green; }	
    50% { background: blue; }	
    75% { background: green; }	
  }

  .win {
    z-index: 3;
  }

  .next_server.active, .win.active {
	display: block;
  }
  
  .win.active {
    -webkit-animation: win;
    -webkit-animation-duration: .5s;
    -webkit-animation-iteration-count: infinite;
  }
</style>

<div class="score1"><span class="number"></span></div>
<div class="score2"><span class="number"></span></div>
<div class="next_server"></div>
<div class="win"></div>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript">
function FastClick(e){"use strict";var t,n=this;this.trackingClick=false,this.targetElement=null;this.layer=e;if(!e||!e.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){FastClick.prototype.onClick.apply(n,arguments)};this.onTouchStart=function(){FastClick.prototype.onTouchStart.apply(n,arguments)};this.onTouchMove=function(){FastClick.prototype.onTouchMove.apply(n,arguments)};this.onTouchEnd=function(){FastClick.prototype.onTouchEnd.apply(n,arguments)};this.onTouchCancel=function(){FastClick.prototype.onTouchCancel.apply(n,arguments)};if(typeof window.ontouchstart==="undefined"){return}e.addEventListener("click",this.onClick,true);e.addEventListener("touchstart",this.onTouchStart,true);e.addEventListener("touchmove",this.onTouchMove,true);e.addEventListener("touchend",this.onTouchEnd,true);e.addEventListener("touchcancel",this.onTouchCancel,true);if(typeof e.onclick==="function"){t=e.onclick;e.addEventListener("click",function(e){t(e)},false);e.onclick=null}}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"label":case"video":return true;default:return/\bneedsclick\b/.test(e.className)}};FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":case"select":return true;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false;default:return true}break;default:return/\bneedsfocus\b/.test(e.className)}};FastClick.prototype.maybeSendClick=function(e,t){"use strict";var n,r;if(this.needsClick(e)){return false}r=t.changedTouches[0];n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true,window,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null);n.forwardedTouchEvent=true;e.dispatchEvent(n);return true};FastClick.prototype.onTouchStart=function(e){"use strict";var t=e.targetTouches[0];this.trackingClick=true;this.targetElement=e.target;this.touchStartX=t.pageX;this.touchStartY=t.pageY;return true};FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.targetTouches[0];if(Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10){return true}return false};FastClick.prototype.onTouchMove=function(e){"use strict";if(!this.trackingClick){return true}if(this.targetElement!==e.target||this.touchHasMoved(e)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n=this.targetElement;if(!this.trackingClick){return true}this.trackingClick=false;if(n.nodeName.toLowerCase()==="label"&&n.htmlFor){t=document.getElementById(n.htmlFor);if(t){n.focus();if(this.android){return false}if(this.maybeSendClick(t,e)){e.preventDefault()}return false}}else if(this.needsFocus(n)){n.focus();if(n.tagName.toLowerCase()!=="select"){e.preventDefault()}return false}if(!this.maybeSendClick(n,e)){return false}e.preventDefault();return false};FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=false;this.targetElement=null};FastClick.prototype.onClick=function(e){"use strict";var t;if(e.forwardedTouchEvent){return true}if(!this.targetElement){return true}t=this.targetElement;this.targetElement=null;if(!e.cancelable){return true}if(e.target.type==="submit"&&e.detail===0){return true}if(!this.needsClick(t)){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}e.stopPropagation();e.preventDefault();return false}return true};FastClick.prototype.destroy=function(){"use strict";var e=this.layer;e.removeEventListener("click",this.onClick,true);e.removeEventListener("touchstart",this.onTouchStart,true);e.removeEventListener("touchmove",this.onTouchMove,true);e.removeEventListener("touchend",this.onTouchEnd,true);e.removeEventListener("touchcancel",this.onTouchCancel,true)};if(typeof define==="function"&&define.amd){define(function(){"use strict";return FastClick})}
</script>

<script type="text/javascript">
window.addEventListener('load', function() {
  new FastClick(document.body);
}, false);
window.addEventListener("touchmove", function(e) {
    e.preventDefault();
    e.click();
});

var Total = 0;
var Score;

Score = (function() {
  function Score(score, $container) {
    this.score = score != null ? score : 0;
    this.$container = $container;
    this.render();
  }

  Score.prototype.render = function() {
    this.$container.find('.number').text(this.score);
    if (this.is_next_server()) {
      return $('.next_server').addClass('active');
    }
    if (this.win_condition()) {
      return $('.win').addClass('active');
    }
  };

  Score.prototype.update = function(amount) {
    if (amount == null) {
      amount = 1;
    }
    Total = Total + amount;
    return this.score = this.score + amount;
  };

  Score.prototype.is_next_server = function() {
    return Total % 5 === 0;
  };

  Score.prototype.win_condition = function() {
    return this.score > 20;
  };

  return Score;
})();

$(function() {
  var score1, score2;
  $('.next_server').click(function() {
    return $(this).removeClass('active');
  });
  $('.win').click(function() {
    location.reload();
  });
  score1 = new Score(0, $('.score1'));
  score2 = new Score(0, $('.score2'));
  $('.score1').click(function() {
    score1.update(1);
    return score1.render();
  });
  return $('.score2').click(function() {
    score2.update(1);
    return score2.render();
  });
});
</script>
